"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},_createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),CFCMSelect=function(){function t(e){_classCallCheck(this,t),this.initVal(e)}return _createClass(t,[{key:"getId",value:function(t){return document.getElementById(t)}},{key:"getClassAll",value:function(t){return document.querySelectorAll(t)}},{key:"getIdClass",value:function(t,e){return document.getElementById(t).querySelector("."+e)}},{key:"parents",value:function(t,e){return t.className==e?t:(t=t.parentNode,this.parents(t,e))}},{key:"remove",value:function(t){var e=t.parentNode;e&&e.removeChild(t)}},{key:"initVal",value:function(t){var e={data:!1,classes:{Select:"Select",show:"show",arrow:"arrow",list:"list",listinfo:"listinfo"},domdata:!1,originS:!1,selectId:"select0",callback:!1,position:!1,disabled:!1};if(this.cfg={},_extends(this.cfg,e,t),this.cfg.disabled)return!1;this.initCommonVal()}},{key:"initCommonVal",value:function(){var t=this;switch("multiple"==this.cfg.originS?(this.selectDomObj=this.getId(this.cfg.selectId[0]),this.selectObj=this.getId(this.cfg.selectId[1]),this.cfg.selectIdAs=this.cfg.selectId[1]):(this.selectObj=this.getId(this.cfg.selectId),this.cfg.selectIdAs=this.cfg.selectId),this.cfg.originS){case!0:this.htmlinsert(this.cfg.originS),this.cfg.multiple=this.getId(this.cfg.selectIdAs).multiple,this.cfg.multiple?this.cfg.Sinfo=[]:this.cfg.Sinfo={},this.selectObj.addEventListener("change",function(){t.onchange(t)},!1),"function"==typeof this.cfg.callback&&this.cfg.callback(this.cfg.Sinfo);break;case!1:case"multiple":if("multiple"==this.cfg.originS?(this.cfg.multiple=Boolean(this.selectObj.getAttribute("multiple")||this.selectDomObj.getAttribute("multiple")),this.htmlinsert(this.cfg.originS)):(this.cfg.multiple=Boolean(this.getId(this.cfg.selectIdAs).getAttribute("multiple")),this.htmlinsert(this.cfg.originS)),!this.cfg.domdata){this.cfg.multiple?this.cfg.domdata=[]:this.cfg.domdata={};var e=this.selectObj.querySelector("."+this.cfg.classes.list).children[0],s={};s.value=e.getAttribute("value"),s.txt=e.textContent,s.ind=0,this.cfg.multiple?this.cfg.domdata.push(s):this.cfg.domdata=s}if(this.cfg.multiple)this.getIdClass(this.cfg.selectIdAs,this.cfg.classes.show).innerHTML=t.cfg.domdata[0].txt,this.getIdClass(this.cfg.selectIdAs,this.cfg.classes.list).children[this.cfg.domdata[0].ind].setAttribute("class",this.cfg.classes.listinfo+" selected"),this.listMultipleEvent();else{var i=this.getIdClass(this.cfg.selectIdAs,this.cfg.classes.show),l=this.getIdClass(this.cfg.selectIdAs,this.cfg.classes.list);i.innerHTML=t.cfg.domdata.txt,l.children[this.cfg.domdata.ind].setAttribute("class",this.cfg.classes.listinfo+" selected"),this.listEvent()}this.arrowshowEvent(this.cfg.classes.show),this.arrowshowEvent(this.cfg.classes.arrow),this.documentEvent()}}},{key:"onchange",value:function(){if(this.cfg.multiple){t=this.cfg.Sinfo=[];Array.prototype.slice.call(this.selectObj.options).forEach(function(e,s){if(e.selected){var i={};i.index=s,i.txt=e.textContent,i.val=e.value,t.push(i)}})}else{var t=this.cfg.Sinfo={},e={};e.ind=this.selectObj.selectedIndex,e.val=this.selectObj.options[e.ind].value,e.txt=this.selectObj.options[e.ind].textContent,t=e}this.cfg.callback(t)}},{key:"arrowshowEvent",value:function(t){var e=this;this.getIdClass(this.cfg.selectIdAs,t).onclick=function(s){var i=window.event||s;i.stopPropagation?i.stopPropagation():i.cancelBubble=!0;var l=void 0,c=(l=t==e.cfg.classes.arrow?this.nextElementSibling:this.nextElementSibling.nextElementSibling).style.display;""==c||"none"==c?(l.style.display="block","top"==e.cfg.position&&(l.style.top=-(l.clientHeight+this.clientHeight)+"px")):l.removeAttribute("style")}}},{key:"siblings",value:function(t){for(var e=[],s=t.previousSibling;s;)1===s.nodeType&&e.push(s),s=s.previousSibling;e.reverse();for(var i=t.nextSibling;i;)1===i.nodeType&&e.push(i),i=i.nextSibling;return e}},{key:"htmlinsert",value:function(t){var e=this,s="",i="",l="",c=this.cfg.classes;if(this.cfg.data)switch(t){case"multiple":if(this.selectDomObj.style.display="none",this.selectDomObj.innerHTML="",0==this.cfg.data.length){var a=e.ie9Option({txt:"请选择"});l+='<div class="'+c.listinfo+'"  value="">请选择</div>',this.selectDomObj.add(a)}else this.cfg.data.forEach(function(t,s){var i=e.ie9Option(t);l+='<div class="'+c.listinfo+'" value="'+t.value+'">'+t.txt+"</div>",e.selectDomObj.add(i)});this.selectObj.setAttribute("class",c.Select);this.selectDomObj.options;i+=' <div class="'+c.show+'"></div>\n\t\t\t\t\t\t\t\t<div class="'+c.arrow+'">箭头</div>\n\t\t\t\t\t\t\t\t<div class="'+c.list+'">',i+=l,i+="</div>",this.selectObj.innerHTML=i;break;case!0:if(this.selectObj.innerHTML="",0==this.cfg.data.length){var n=e.ie9Option({txt:"请选择"});this.selectObj.add(n)}else this.cfg.data.forEach(function(t,s){var i=e.ie9Option(t);e.selectObj.add(i),e.cfg.domdata&&e.cfg.domdata.ind==s&&(e.selectObj.options[s].selected=!0)});break;case!1:this.selectObj.innerHTML="",this.selectObj.setAttribute("class",c.Select),s+=' <div class="'+c.show+'"></div>\n\t\t\t\t\t\t\t\t<div class="'+c.arrow+'">箭头</div>\n\t\t\t\t\t\t\t\t<div class="'+c.list+'">',0==this.cfg.data.length?(s+='<div class="'+c.listinfo+'"  value="">请选择</div>',this.cfg.domdata={},this.cfg.domdata.ind=0):this.cfg.data.forEach(function(t,i){e.cfg.domdata&&e.cfg.domdata.ind==i?s+='<div class="'+c.listinfo+' selected"  value="'+t.value+'">'+t.txt+"</div>":s+='<div class="'+c.listinfo+'"  value="'+t.value+'">'+t.txt+"</div>"}),s+="</div>",this.selectObj.innerHTML=s}else switch(t){case"multiple":this.selectObj.setAttribute("class",c.Select),this.selectDomObj.style.display="none",s+=' <div class="'+c.show+'"></div>\n\t\t\t\t\t\t\t\t<div class="'+c.arrow+'">箭头</div>\n\t\t\t\t\t\t\t\t<div class="'+c.list+'">';var o=this.selectDomObj.options;0==o.length?s+='<div class="'+c.listinfo+'"  value="">请选择</div>':Array.prototype.slice.call(o).forEach(function(t,e){s+='<div class="'+c.listinfo+'"  value="'+t.value+'">'+t.textContent+"</div>"}),s+="</div>",this.selectObj.innerHTML=s;break;case!1:this.selectObj.setAttribute("class",c.Select),s+=' <div class="'+c.show+'"></div>\n\t\t\t\t\t\t\t\t<div class="'+c.arrow+'">箭头</div>\n\t\t\t\t\t\t\t\t<div class="'+c.list+'">',""==this.selectObj.innerHTML.replace(/\s/g,"")?s+='<div class="'+c.listinfo+'"  value="">请选择</div>':s+=""+this.selectObj.innerHTML,s+="</div>",this.selectObj.innerHTML=s}}},{key:"ie9Option",value:function(t){var e=document.createElement("option");return e.textContent=t.txt,e.value=t.value,e}},{key:"listEvent",value:function(){var t=this,e=this.getIdClass(this.cfg.selectIdAs,this.cfg.classes.list).children;Array.prototype.slice.call(e).forEach(function(e,s){e.onclick=function(i){var l=window.event||i;l.stopPropagation?l.stopPropagation():l.cancelBubble=!0,t.cfg.data?t.cfg.domdata=t.cfg.data[s]:(t.cfg.domdata.txt=e.textContent,t.cfg.domdata.value=e.getAttribute("value")),t.cfg.domdata.ind=s,"multiple"==t.cfg.originS&&(t.selectDomObj.options[s].selected=!0),t.getIdClass(t.cfg.selectIdAs,t.cfg.classes.show).innerHTML=t.cfg.domdata.txt,t.getIdClass(t.cfg.selectIdAs,t.cfg.classes.list).children[t.cfg.domdata.ind].setAttribute("class",t.cfg.classes.listinfo+" selected");var c=t.siblings(this);Array.prototype.slice.call(c).forEach(function(e){e.setAttribute("class",t.cfg.classes.listinfo)}),t.cfg.callback(t.cfg.domdata)}})}},{key:"listMultipleEvent",value:function(){var t=this,e=this.getIdClass(this.cfg.selectIdAs,this.cfg.classes.list).children;Array.prototype.slice.call(e).forEach(function(e,s){e.onclick=function(e){var i=window.event||e;i.stopPropagation?i.stopPropagation():i.cancelBubble=!0;var l="";if(this.className.indexOf("selected")>=0)this.setAttribute("class",t.cfg.classes.listinfo),delete t.cfg.domdata[s],"multiple"==t.cfg.originS&&(t.selectDomObj.options[s].selected=!1),t.cfg.domdata.forEach(function(t){l+=t.txt+","}),t.getIdClass(t.cfg.selectIdAs,t.cfg.classes.show).innerHTML=l.substring(0,l.length-1);else{var c={};c.value=this.getAttribute("value"),c.txt=this.textContent,c.ind=s,t.cfg.domdata[s]=c,t.cfg.domdata.forEach(function(e){l+=e.txt+",","multiple"==t.cfg.originS&&(t.selectDomObj.options[e.ind].selected=!0)}),t.getIdClass(t.cfg.selectIdAs,t.cfg.classes.show).innerHTML=l.substring(0,l.length-1),this.setAttribute("class",t.cfg.classes.listinfo+" selected")}t.cfg.callback(t.cfg.domdata)}})}},{key:"documentEvent",value:function(){var t=this;document.addEventListener("click",function(e){var s=e||window.event;s.stopPropagation?s.stopPropagation():s.cancelBubble=!0;var i=s.target||s.srcElement,l=["Select"];if(!t.closeSet(i,l)){var c=t.getClassAll("."+t.cfg.classes.Select);Array.prototype.slice.call(c).forEach(function(e){e.querySelector("."+t.cfg.classes.list).style.display="none"})}},!1)}},{key:"closeSet",value:function(t,e){var s=t,i=0;if("body"==s.nodeName.toLowerCase()||"document"==s.nodeName.toLowerCase()||"html"==s.nodeName.toLowerCase())return!1;for(var l=!1,c=0;c<e.length&&""!=s.className;c++)if(s.className==e[c]){i++,l=!0;break}return 0==i&&(s=s.parentNode,this.closeSet(s,e)),l}}]),t}();
export function CFCMSelect(param) {
		return new CFCMSelect(param)
	}